{"version":3,"sources":["components/book-list/book-list.module.css","components/app/app.module.css","components/error-indicator/error-indicator.module.css","components/loader/loader.tsx","actions/actions.tsx","services/bookstore-service.tsx","services/key.tsx","components/book-list/book-item/book-list-item.tsx","components/book-list/book-list.tsx","components/book-page/book-page.tsx","components/header/header.tsx","components/app/app.tsx","reducers/reducer.tsx","store.tsx","components/error-indicator/error-indicator.tsx","components/error-indicator/error-boundry/error-boundry.tsx","index.tsx","components/header/header.module.css","components/book-page/book-page.module.css","components/book-list/book-item/book-list-item.module.css"],"names":["module","exports","Loader","className","fetchBooksTC","bookstoreService","search","dispatch","type","getBooks","then","data","payload","catch","err","BookstoreService","_apiBase","_pagination","getResource","searchTerm","sortBy","startAt","category","a","searchTermAdjusted","split","join","sortedBy","startIndex","sortByCategory","fetch","res","ok","Error","status","json","booksFound","totalItems","booksLoaded","items","map","_transformBook","book","id","authors","volumeInfo","title","categories","description","image","imageLinks","thumbnail","BookListItem","history","useNavigate","styles","container","onClick","path","style","backgroundImage","info","author","BookList","loading","useSelector","state","books","currentSearch","useDispatch","loadMore","button","length","page","text","list","item","BookPage","bookId","find","categoryList","authorList","buttonText","left","right","Header","useState","setSearchTerm","setSortBy","setCategory","onSubmit","onFirstSearch","useEffect","onKeyPress","e","key","input","onChange","target","value","placeholder","sorting","label","options","sortby","App","error","bookList","start","match","useMatch","params","routes","element","elements","useRoutes","app","initialState","onBooksLoaded","newBooks","onFailure","onContinueSearch","onClearSearch","onClearData","persistedState","localStorage","getItem","JSON","parse","undefined","store","createStore","action","applyMiddleware","thunkMiddleware","subscribe","setItem","stringify","getState","ErrorIndicator","ErrorBoundry","this","setState","props","children","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.21480b9a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"book-list_page__2LTpT\",\"text\":\"book-list_text__3fJgN\",\"list\":\"book-list_list__3ViVm\",\"button\":\"book-list_button__1QD5D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__M9MMq\",\"start\":\"app_start__1JS1W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"error-indicator_error__1rsSk\",\"title\":\"error-indicator_title__h9uQQ\"};","import './loader.css';\n\nexport const Loader = () => {\n    return (\n        <div className=\"loadingio-spinner-rolling-liig12v7lb\">\n            <div className=\"ldio-hd6l29vdydb\">\n                <div></div>\n            </div>\n        </div>\n    );\n};","import { Dispatch } from \"redux\";\nimport { SearchType, ServiceType } from \"../types\";\n\nconst booksRequested = () => {\n    return {\n        type: 'FETCH_BOOKS_REQUEST',\n    } as const;\n};\n\nconst booksLoaded = (newBooks: ServiceType) => {\n    return {\n        type: 'FETCH_BOOKS_SUCCESS',\n        payload: newBooks\n    } as const;\n};\n\nconst booksError = (error: object) => {\n    return {\n        type: 'FETCH_BOOKS_FAILURE',\n        payload: error\n    } as const;\n};\n\nconst clearData = () => {\n    return {\n        type: 'CLEAR_DATA'\n    } as const;\n};\n\nconst onFirstSearch = (search: SearchType) => {\n    return {\n        type: 'ON_FIRST_SEARCH',\n        payload: search\n    } as const;\n};\n\nconst onContinueSearch = (startAt: number) => {\n    return {\n        type: 'ON_CONTINUE_SEARCH',\n        payload: startAt\n    } as const;\n};\n\nconst clearSearch = () => {\n    return {\n        type: 'CLEAR_SEARCH'\n    } as const;\n};\n\nconst fetchBooksTC = (bookstoreService: any, search: SearchType) => {\n    return (dispatch: Dispatch) => { \n        dispatch(booksRequested());\n        bookstoreService.getBooks(search)\n            .then((data: ServiceType) => dispatch(booksLoaded(data)))\n            .catch((err: object) => dispatch(booksError(err)));\n    };\n};\n       \nexport {\n    booksRequested,\n    booksLoaded,\n    booksError,\n    fetchBooksTC,\n    onFirstSearch,\n    onContinueSearch,\n    clearSearch,\n    clearData\n};","import { BookType, SearchType } from \"../types\";\nimport { key } from \"./key\";\n\nexport default class BookstoreService {\n\n    _apiBase = 'https://www.googleapis.com/books/v1/volumes?q=';\n\n    _pagination = 30;\n\n    getResource = async (searchTerm: string, sortBy?: string, startAt?: number, category?: string) => {\n\n        const { _apiBase, _pagination } = this;\n\n        const searchTermAdjusted: string = searchTerm.split(' ').join('+');\n\n        const sortedBy = sortBy === 'newest' ? '&orderBy=newest' : '';\n        const startIndex = startAt ? `&startIndex=${startAt}` : '';\n        const sortByCategory = category !== 'all' ? `+subject:${category}`: '';\n        \n        const res = await fetch(\n            `${_apiBase}${searchTermAdjusted}${sortByCategory}&maxResults=${_pagination}${startIndex}${sortedBy}&printType=books&key=${key}`\n        );\n\n        if (!res.ok) {\n            throw new Error(`Could not fetch ${searchTerm}` +\n                `, recieved ${res.status}`)\n        }\n\n        return await res.json();\n    };\n\n    getBooks = async (search: SearchType) => { \n\n        const { searchTerm, sortBy, category, startAt } = search;\n\n        const res = await this.getResource(searchTerm, sortBy, startAt, category);\n        \n        return {\n            booksFound: res.totalItems,\n            booksLoaded: res.items.map(this._transformBook)\n        };\n    };\n\n    _transformBook = (book: any): BookType => { \n        return {\n            id: book.id,\n            authors: book.volumeInfo.authors || ['N/a'],\n            title: book.volumeInfo.title || 'N/a',\n            categories: book.volumeInfo.categories || ['N/a'],\n            description: book.volumeInfo.description || 'N/a',\n            image: book.volumeInfo.imageLinks.thumbnail || 'N/a'\n        };\n    };\n};","export const key = 'AIzaSyBeHQfr0O1DTsjDhj1eYM3r8LTwWfjwlyQ';","//@ts-ignore\nimport { useNavigate } from 'react-router-dom';\nimport { BookType } from '../../../types';\nimport styles from './book-list-item.module.css';\n\ntype BookListItemPropsType = {\n    book: BookType\n}\n\nexport const BookListItem = ({ book }: BookListItemPropsType) => {\n\n    const { title, categories, authors, image, id } = book;\n\n    const history = useNavigate();\n\n    const onClick = (id: string) => {\n        const path = `/${id}`;\n        history(path);\n    };\n\n    return (\n        <div\n            className={styles.container}\n            onClick={() => onClick(id)} >\n            <div className={styles.image} style={{ backgroundImage: `url(${image})` }} />\n            <div className={styles.info}>\n                <p className={styles.category}>\n                    {categories[0]}\n                </p>\n                <p className={styles.title}>\n                    {title}\n                </p>\n                <p className={styles.author}>\n                    {authors[0]}\n                </p>\n            </div>\n        </div>\n    );\n};","import { Loader } from '../loader/loader';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StateType } from '../../types';\nimport styles from './book-list.module.css';\nimport { fetchBooksTC, onContinueSearch } from '../../actions/actions';\nimport BookstoreService from '../../services/bookstore-service';\nimport { BookListItem } from './book-item/book-list-item';\n\nconst bookstoreService = new BookstoreService();\n\nexport const BookList = () => {\n\n    const loading = useSelector((state: StateType) => state.loading);\n    const booksFound = useSelector((state: StateType) => state.books.booksFound);\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n    const currentSearch = useSelector((state: StateType) => state.currentSearch);\n\n    const dispatch = useDispatch();\n\n    const onClick = () => {\n\n        const search = {\n            ...currentSearch,\n            startAt: booksLoaded.length\n        };\n\n        dispatch(fetchBooksTC(bookstoreService, search));\n        dispatch(onContinueSearch(booksLoaded.length));\n    };\n\n    const loadMore = loading ? <Loader /> :\n        (\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                Load more\n            </button>\n        );\n\n    return (\n        <div className={styles.page} >\n            <p className={styles.text}><b>{booksFound}</b> books found</p>\n            <ul className={styles.list} >\n                {\n                    booksLoaded.map((item) => {\n                        return (\n                            <li key={item.id}>\n                                <BookListItem book={item} />\n                            </li>\n                        );\n                    })\n                }\n            </ul>\n            {booksLoaded.length >= booksFound ? null : loadMore}\n        </div>\n    );\n};","import { useNavigate } from 'react-router';\nimport { BookType } from '../../types';\nimport styles from './book-page.module.css';\n\ntype BookPagePropsType = {\n    books: BookType[]\n    bookId: string\n}\n\nexport const BookPage = ({ books, bookId }: BookPagePropsType) => {\n\n    const book: BookType = books.find((item) => {\n        return item.id === bookId;\n    })!;\n\n    const { title, image, categories, authors, description } = book;\n    \n    const categoryList = categories.join(' / ');\n    const authorList = authors.join(' / ');\n\n    const history = useNavigate();\n\n    const onClick = () => {\n        history('/');\n    };\n\n    return (\n        <div className={styles.page} >\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                <i className='fas fa-angle-left fa-2x' />\n                <p className={styles.buttonText} >back</p>\n            </button>\n            <div className={styles.left} >\n                <div className={styles.image} style={{ backgroundImage: `url(${image})` }} />\n            </div>\n            <div className={styles.right} >\n                <p className={styles.category} >{categoryList}</p>\n                <p className={styles.title} >{title}</p>\n                <p className={styles.author} >{authorList}</p>\n                <div className={styles.container} >\n                    <p className={styles.description} >{description}</p>\n                </div>\n            </div>\n        </div>\n    );\n};","import { useState, ChangeEvent, KeyboardEvent, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearData, clearSearch, fetchBooksTC, onFirstSearch } from '../../actions/actions';\nimport BookstoreService from '../../services/bookstore-service';\nimport { StateType } from '../../types';\nimport { Loader } from '../loader/loader';\nimport styles from './header.module.css';\n\nconst bookstoreService = new BookstoreService();\n\nexport const Header = () => {\n\n    const loading = useSelector((state: StateType) => state.loading);\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n\n    const dispatch = useDispatch();\n\n    const [searchTerm, setSearchTerm] = useState('');\n    const [sortBy, setSortBy] = useState('relevance');\n    const [category, setCategory] = useState('all');\n \n    const onSubmit = () => {\n \n        const search = {\n            searchTerm: searchTerm,\n            category: category,\n            sortBy: sortBy,\n            startAt: 0\n        };\n        dispatch(clearData());\n        dispatch(fetchBooksTC(bookstoreService, search));\n        dispatch(onFirstSearch(search));\n    };\n\n    useEffect(() => {\n        if (booksLoaded.length > 0) {\n            onSubmit();\n        };\n    }, [sortBy, category]);\n\n    useEffect(() => {\n        dispatch(clearSearch());\n    }, [searchTerm, dispatch]);\n\n    const onKeyPress = (e: KeyboardEvent<HTMLDivElement>) => {\n        if(e.key === 'Enter') onSubmit();\n    };\n\n    const onSearchChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setSearchTerm(e.target.value);\n    };\n\n    const onCategoryChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        setCategory(e.target.value);\n    };\n\n    const onSortByChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        setSortBy(e.target.value);\n    };\n    \n    const search = loading ? <Loader /> : <i className=\"fas fa-search\" onClick={onSubmit}></i>;\n\n    return (\n        <div \n            className={styles.container}\n            onKeyPress={onKeyPress} >\n            <h1 className={styles.title} >\n                Search for books\n            </h1>\n            <div className={styles.search} >\n                <input\n                    className={styles.input}\n                    onChange={onSearchChange}\n                    placeholder='Search' />\n                <span className={styles.button} >\n                    {search}\n                </span>\n            </div>\n            <div className={styles.sorting} >\n                <span className={styles.categories} >\n                    <label className={styles.label} >Categories</label>\n                    <select\n                        className={styles.options}\n                        onChange={onCategoryChange} >\n                        <option>all</option>\n                        <option>art</option>\n                        <option>biography</option>\n                        <option>computers</option>\n                        <option>history</option>\n                        <option>medical</option>\n                        <option>poetry</option>\n                    </select>\n                </span>\n                <span className={styles.sortby} >\n                    <label className={styles.label} >Sorting by</label>\n                    <select\n                        className={styles.options}\n                        onChange={onSortByChange} >\n                        <option>relevance</option>\n                        <option>newest</option>\n                    </select>\n                </span>\n            </div>\n        </div>\n    );\n};","import { useSelector } from \"react-redux\";\nimport { RouteObject, useMatch, useRoutes } from \"react-router\";\nimport { StateType } from \"../../types\";\nimport { BookList } from \"../book-list/book-list\";\nimport { BookPage } from \"../book-page/book-page\";\nimport { Header } from \"../header/header\";\nimport { Loader } from \"../loader/loader\";\nimport styles from './app.module.css';\n\nexport const App = () => {\n\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n    const loading = useSelector((state: StateType) => state.loading);\n    const error = useSelector((state: StateType) => state.error); \n\n    const bookList = booksLoaded.length > 0 ?\n        <BookList />\n        : loading ? <Loader /> \n        : error ? \n        <p className={styles.start}>We couldn't find anything, try again!</p>\n        : <p className={styles.start}>Start searching for the book!</p>;\n\n    const match = useMatch('/:id');\n    const id: string = match?.params.id ? match?.params.id : '';\n\n    const routes: RouteObject[] = [ \n        {\n            path: '/',\n            element: bookList\n        },\n        {\n            path: '/:id',\n            element: <BookPage \n                books={booksLoaded}\n                bookId={id} />\n        },\n        {\n            path: '*',\n            element: bookList\n        }\n    ];\n\n    let elements = useRoutes(routes);\n\n    return (\n        <div className={styles.app}>\n            <Header />\n            {elements}\n        </div>\n    );\n};","import { StateType, ActionTypes, ServiceType, SearchType } from \"../types\";\n\nconst initialState: StateType = {\n    books: {\n        booksFound: 0,\n        booksLoaded: []\n    },\n    currentSearch: {\n        searchTerm: '',\n        category: 'all',\n        sortBy: 'relevance',\n        startAt: 0\n    },\n    loading: false,\n    error: null\n}\n\nexport const reducer = (state: StateType | undefined = initialState, action: ActionTypes): StateType => {\n\n    switch (action.type) {\n        case 'FETCH_BOOKS_REQUEST':\n            return {\n                ...state,\n                loading: true,\n                error: null\n            };\n        case 'FETCH_BOOKS_SUCCESS':\n            return onBooksLoaded(state, action.payload);\n        case 'FETCH_BOOKS_FAILURE':\n            return onFailure(state, action.payload);\n        case 'ON_FIRST_SEARCH':\n            return onFirstSearch(state, action.payload);\n        case 'ON_CONTINUE_SEARCH':\n            return onContinueSearch(state, action.payload);\n        case 'CLEAR_SEARCH':\n            return onClearSearch(state);\n        case 'CLEAR_DATA':\n            return onClearData(state);\n        default:\n            return state;\n    }\n};\n\nconst onBooksLoaded = (state: StateType, payload: ServiceType) => {\n    \n    const { books } = state;\n\n    const newBooks = [\n        ...books.booksLoaded,\n        ...payload.booksLoaded\n    ]\n\n    return {\n        ...state,\n        books: {\n            booksFound: payload.booksFound,\n            booksLoaded: newBooks\n        },\n        loading: false,\n        error: null\n    }\n};\n\nconst onFailure = (state: StateType, payload: object) => {\n    return {\n        ...state,\n        loading: false,\n        error: payload\n    };\n};\n\nconst onFirstSearch = (state: StateType, payload: SearchType) => {\n    return {\n        ...state,\n        currentSearch: payload\n    };\n};\n\nconst onContinueSearch = (state: StateType, payload: number) => {\n    return {\n        ...state,\n        currentSearch: {\n            ...state.currentSearch,\n            startAt: payload\n        }\n    };\n};\n\nconst onClearSearch = (state: StateType) => {\n    return {\n        ...state,\n        currentSearch: {\n            searchTerm: '',\n            category: 'all',\n            sortBy: 'relevance',\n            startAt: 0\n        }\n    };\n};\n\nconst onClearData = (state: StateType) => {\n    return {\n        ...state,\n        books: {\n            booksFound: 0,\n            booksLoaded: []\n        }\n    };\n};\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { reducer } from \"./reducers/reducer\";\n\nconst  persistedState = localStorage.getItem('bookstoreState') \n    ? JSON.parse(localStorage.getItem('bookstoreState')!) : undefined;\n\nexport const store = createStore(reducer, persistedState, applyMiddleware(thunkMiddleware));\n\nstore.subscribe(() => {\n    localStorage.setItem('bookstoreState', JSON.stringify(store.getState()));\n});","import styles from './error-indicator.module.css';\n\nexport const ErrorIndicator = () => {\n    return (\n        <div className={styles.error}>\n            <p className={styles.title}>Error!</p>\n            <p>Something went wrong</p>\n        </div>\n    );\n};","import { Component } from 'react';\nimport { ErrorIndicator } from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n    state = {\n        error: false\n    };\n\n    componentDidCatch() {\n        this.setState({ error: true });\n    };\n\n    render() {\n        if (this.state.error) {\n            return <ErrorIndicator />;\n        }\n\n        return this.props.children;\n    };\n};","import { StrictMode } from 'react';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { App } from './components/app/app';\nimport { store } from './store';\nimport ReactDOM from 'react-dom';\nimport ErrorBoundry from './components/error-indicator/error-boundry/error-boundry';\nimport './index.css';\n\nReactDOM.render(\n  <StrictMode>\n    <Provider store={store}>\n      <ErrorBoundry>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </ErrorBoundry>\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"header_container__Qg6Mi\",\"title\":\"header_title__1DXxp\",\"input\":\"header_input__2cfQn\",\"sorting\":\"header_sorting__1op8t\",\"label\":\"header_label__5gY9r\",\"options\":\"header_options__2uQYe\",\"categories\":\"header_categories__Hrmmh\",\"sortby\":\"header_sortby__2njdc\",\"search\":\"header_search__130F1\",\"button\":\"header_button__G3RR8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"book-page_page__3w5u0\",\"left\":\"book-page_left__2JpXO\",\"image\":\"book-page_image__38L3Z\",\"right\":\"book-page_right__2th9H\",\"category\":\"book-page_category__iB54K\",\"title\":\"book-page_title__1Hoja\",\"author\":\"book-page_author__2cELh\",\"container\":\"book-page_container__2guiP\",\"description\":\"book-page_description__kSeF4\",\"button\":\"book-page_button__8cSDH\",\"buttonText\":\"book-page_buttonText__2G3oX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"book-list-item_container__3YSdd\",\"info\":\"book-list-item_info__1v0FZ\",\"category\":\"book-list-item_category__3g5Ki\",\"author\":\"book-list-item_author__36aul\",\"title\":\"book-list-item_title__3jXk-\",\"image\":\"book-list-item_image__1KfFU\"};"],"sourceRoot":""}