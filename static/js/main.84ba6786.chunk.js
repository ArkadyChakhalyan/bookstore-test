(this["webpackJsonpbookstore-test"]=this["webpackJsonpbookstore-test"]||[]).push([[0],{11:function(e,t,a){e.exports={page:"book-list_page__2LTpT",text:"book-list_text__3fJgN",list:"book-list_list__3ViVm",load:"book-list_load__3EOCR",button:"book-list_button__1QD5D"}},17:function(e,t,a){e.exports={app:"app_app__M9MMq",start:"app_start__1JS1W"}},18:function(e,t,a){e.exports={error:"error-indicator_error__1rsSk",title:"error-indicator_title__h9uQQ",button:"error-indicator_button__3h7hC"}},21:function(e,t,a){e.exports={inside:"loader_inside__2XuVw",animation:"loader_animation__226S_",outside:"loader_outside__cVwyH"}},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(4),c=a(16),r=a(7),s=a(3),i=a(21),l=a.n(i),b=a(1),u=function(){return Object(b.jsx)("div",{className:l.a.outside,children:Object(b.jsx)("div",{className:l.a.inside,children:Object(b.jsx)("div",{})})})},j=a(11),d=a.n(j),h=function(e,t){return function(a){a({type:"FETCH_BOOKS_REQUEST"}),e.getBooks(t).then((function(e){return a({type:"FETCH_BOOKS_SUCCESS",payload:e})})).catch((function(e){return a({type:"FETCH_BOOKS_FAILURE",payload:e})}))}},_=a(13),O=a.n(_),p=a(22),f=a(15),g=function e(){var t=this;Object(f.a)(this,e),this._apiBase="https://www.googleapis.com/books/v1/volumes?q=",this._pagination=30,this.getResource=function(){var e=Object(p.a)(O.a.mark((function e(a,n,o,c){var r,s,i,l,b,u,j;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._apiBase,s=t._pagination,i=a.split(" ").join("+"),l="newest"===n?"&orderBy=newest":"",b=o?"&startIndex=".concat(o):"",u="all"!==c?"+subject:".concat(c):"",e.next=7,fetch("".concat(r).concat(i).concat(u,"&maxResults=").concat(s).concat(b).concat(l,"&printType=books&key=").concat("AIzaSyBeHQfr0O1DTsjDhj1eYM3r8LTwWfjwlyQ"));case 7:if((j=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(a)+", recieved ".concat(j.status));case 10:return e.next=12,j.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n,o){return e.apply(this,arguments)}}(),this.getBooks=function(){var e=Object(p.a)(O.a.mark((function e(a){var n,o,c,r,s,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.searchTerm,o=a.sortBy,c=a.category,r=a.startAt,s=t.getResource,i=t._transformBook,e.next=4,s(n,o,r,c);case 4:return l=e.sent,e.abrupt("return",{booksFound:l.totalItems,booksLoaded:l.items.map((function(e){return i(e)}))});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformBook=function(e){return{id:e.id,authors:e.volumeInfo.authors||[""],title:e.volumeInfo.title||"",categories:e.volumeInfo.categories||[""],description:e.volumeInfo.description||"",image:e.volumeInfo.imageLinks.thumbnail||""}}},m=a(9),x=a.n(m),k=function(e){var t=e.book,a=e.setPage,n=t.title,o=t.categories,c=t.authors,r=t.image,s=c.join(" / ");return Object(b.jsxs)("div",{className:x.a.container,onClick:function(){a(t)},children:[Object(b.jsx)("div",{className:x.a.image,style:{backgroundImage:"url(".concat(r,")")}}),Object(b.jsxs)("div",{className:x.a.info,children:[Object(b.jsx)("p",{className:x.a.category,children:o[0]}),Object(b.jsx)("p",{className:x.a.title,children:n}),Object(b.jsx)("p",{className:x.a.author,children:s})]})]})},v=a(8),y=a.n(v),N=function(e){var t=e.book,a=e.goBack;window.scrollTo(0,0);var n=t.title,o=t.image,c=t.categories,r=t.authors,s=t.description,i=c.join(" / "),l=r.join(" / ");return Object(b.jsxs)("div",{className:y.a.page,children:[Object(b.jsxs)("button",{className:y.a.button,onClick:function(){return a()},children:[Object(b.jsx)("i",{className:"fas fa-angle-left fa-2x"}),Object(b.jsx)("p",{className:y.a.buttonText,children:"back"})]}),Object(b.jsx)("div",{className:y.a.left,children:Object(b.jsx)("div",{className:y.a.image,style:{backgroundImage:"url(".concat(o,")")}})}),Object(b.jsxs)("div",{className:y.a.right,children:[Object(b.jsx)("p",{className:y.a.category,children:i}),Object(b.jsx)("p",{className:y.a.title,children:n}),Object(b.jsx)("p",{className:y.a.author,children:l}),Object(b.jsx)("div",{className:y.a.container,children:Object(b.jsx)("p",{className:y.a.description,children:s})})]})]})},S=new g,E=function(){var e=Object(o.c)((function(e){return e.loading})),t=Object(o.c)((function(e){return e.books.booksFound})),a=Object(o.c)((function(e){return e.books.booksLoaded})),c=Object(o.c)((function(e){return e.currentSearch})),i=Object(o.b)(),l=e?Object(b.jsx)(u,{}):Object(b.jsx)("button",{className:d.a.button,onClick:function(){var e=Object(s.a)(Object(s.a)({},c),{},{startAt:a.length.toString()});i(h(S,e)),i({type:"ON_CONTINUE_SEARCH",payload:a.length.toString()})},children:"Load more"}),j=Object(n.useState)(null),_=Object(r.a)(j,2),O=_[0],p=_[1];return O?Object(b.jsx)(N,{book:O,goBack:function(){return p(null)}}):Object(b.jsxs)("div",{className:d.a.page,children:[Object(b.jsxs)("p",{className:d.a.text,children:[Object(b.jsx)("b",{children:t})," books found"]}),Object(b.jsx)("ul",{className:d.a.list,children:a.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(k,{book:e,setPage:function(e){p(e)}})},e.id)}))}),Object(b.jsx)("div",{className:d.a.load,children:a.length>=t?null:l})]})},C=a(5),w=a.n(C),T=new g,A=function(){var e=Object(o.c)((function(e){return e.loading})),t=Object(o.c)((function(e){return e.books.booksLoaded})),a=Object(o.b)(),s=Object(n.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],d=Object(n.useState)("relevance"),_=Object(r.a)(d,2),O=_[0],p=_[1],f=Object(n.useState)("all"),g=Object(r.a)(f,2),m=g[0],x=g[1],k=Object(c.b)(),v=Object(r.a)(k,2),y=(v[0],v[1]),N=function(){var e={searchTerm:l,category:m,sortBy:O,startAt:"0"};y(e),a({type:"CLEAR_DATA"}),a(h(T,e)),a(function(e){return{type:"ON_FIRST_SEARCH",payload:e}}(e))};Object(n.useEffect)((function(){t.length>0&&N()}),[O,m]),Object(n.useEffect)((function(){a({type:"CLEAR_SEARCH"}),y({})}),[l,a]);var S=e?Object(b.jsx)(u,{}):Object(b.jsx)("button",{className:w.a.button,type:"submit",children:Object(b.jsx)("i",{className:"fas fa-search"})});return Object(b.jsxs)("div",{className:w.a.container,children:[Object(b.jsx)("h1",{className:w.a.title,children:"Search for books"}),Object(b.jsxs)("form",{className:w.a.form,onSubmit:N,onKeyPress:function(e){"Enter"===e.key&&N()},children:[Object(b.jsxs)("div",{className:w.a.search,children:[Object(b.jsx)("input",{className:w.a.input,onChange:function(e){j(e.target.value)},placeholder:"Search"}),Object(b.jsx)("span",{className:w.a.button,children:S})]}),Object(b.jsxs)("div",{className:w.a.sorting,children:[Object(b.jsxs)("span",{className:w.a.categories,children:[Object(b.jsx)("label",{className:w.a.label,children:"Categories"}),Object(b.jsxs)("select",{className:w.a.options,onChange:function(e){x(e.target.value)},children:[Object(b.jsx)("option",{children:"all"}),Object(b.jsx)("option",{children:"art"}),Object(b.jsx)("option",{children:"biography"}),Object(b.jsx)("option",{children:"computers"}),Object(b.jsx)("option",{children:"history"}),Object(b.jsx)("option",{children:"medical"}),Object(b.jsx)("option",{children:"poetry"})]})]}),Object(b.jsxs)("span",{className:w.a.sortby,children:[Object(b.jsx)("label",{className:w.a.label,children:"Sorting by"}),Object(b.jsxs)("select",{className:w.a.options,onChange:function(e){p(e.target.value)},children:[Object(b.jsx)("option",{children:"relevance"}),Object(b.jsx)("option",{children:"newest"})]})]})]})]})]})},B=a(17),R=a.n(B),L=function(){var e=Object(o.c)((function(e){return e.books.booksLoaded})),t=Object(o.c)((function(e){return e.loading})),a=Object(o.c)((function(e){return e.error})),n=e.length>0?Object(b.jsx)(E,{}):t?Object(b.jsx)(u,{}):a?Object(b.jsx)("p",{className:R.a.start,children:"We couldn't find anything, try again!"}):Object(b.jsx)("p",{className:R.a.start,children:"Start searching for the book!"});return Object(b.jsxs)("div",{className:R.a.app,children:[Object(b.jsx)(A,{}),n]})},F=a(23),H=a(26),I=a(24),K={books:{booksFound:0,booksLoaded:[]},currentSearch:{searchTerm:"",category:"all",sortBy:"relevance",startAt:"0"},loading:!1,error:null},D=function(e,t){var a=e.books,n=[].concat(Object(I.a)(a.booksLoaded),Object(I.a)(t.booksLoaded));return Object(s.a)(Object(s.a)({},e),{},{books:{booksFound:t.booksFound,booksLoaded:n},loading:!1,error:null})},Q=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t})},U=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{currentSearch:t})},M=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{currentSearch:Object(s.a)(Object(s.a)({},e.currentSearch),{},{startAt:t})})},J=function(e){return Object(s.a)(Object(s.a)({},e),{},{currentSearch:{searchTerm:"",category:"all",sortBy:"relevance",startAt:"0"}})},V=function(e){return Object(s.a)(Object(s.a)({},e),{},{books:{booksFound:0,booksLoaded:[]}})},X=Object(F.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOOKS_REQUEST":return Object(s.a)(Object(s.a)({},e),{},{loading:!0,error:null});case"FETCH_BOOKS_SUCCESS":return D(e,t.payload);case"FETCH_BOOKS_FAILURE":return Q(e,t.payload);case"ON_FIRST_SEARCH":return U(e,t.payload);case"ON_CONTINUE_SEARCH":return M(e,t.payload);case"CLEAR_SEARCH":return J(e);case"CLEAR_DATA":return V(e);default:return e}}),Object(F.a)(H.a)),P=a(14),Y=a.n(P),G=a(27),W=a(29),q=a(28),Z=a(2),z=a(18),$=a.n(z),ee=function(e){var t=e.setError,a=Object(Z.d)();return Object(b.jsxs)("div",{className:$.a.error,children:[Object(b.jsx)("p",{className:$.a.title,children:"Error!"}),Object(b.jsx)("p",{children:"Something went wrong, try again!"}),Object(b.jsx)("button",{className:$.a.button,onClick:function(){t(),a("/")},children:"Go to homepage"})]})},te=function(e){Object(W.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={error:!1},e.setError=function(){e.setState({error:!1})},e}return Object(G.a)(a,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(b.jsx)(ee,{setError:this.setError}):this.props.children}}]),a}(n.Component);a(42);Y.a.render(Object(b.jsx)(n.StrictMode,{children:Object(b.jsx)(o.a,{store:X,children:Object(b.jsx)(c.a,{children:Object(b.jsx)(te,{children:Object(b.jsx)(L,{})})})})}),document.getElementById("root"))},5:function(e,t,a){e.exports={container:"header_container__Qg6Mi",title:"header_title__1DXxp",input:"header_input__2cfQn",sorting:"header_sorting__1op8t",form:"header_form__CKDVN",label:"header_label__5gY9r",options:"header_options__2uQYe",categories:"header_categories__Hrmmh",sortby:"header_sortby__2njdc",search:"header_search__130F1",button:"header_button__G3RR8"}},8:function(e,t,a){e.exports={page:"book-page_page__3w5u0",left:"book-page_left__2JpXO",image:"book-page_image__38L3Z",right:"book-page_right__2th9H",category:"book-page_category__iB54K",title:"book-page_title__1Hoja",author:"book-page_author__2cELh",container:"book-page_container__2guiP",description:"book-page_description__kSeF4",button:"book-page_button__8cSDH",buttonText:"book-page_buttonText__2G3oX"}},9:function(e,t,a){e.exports={container:"book-list-item_container__3YSdd",info:"book-list-item_info__1v0FZ",category:"book-list-item_category__3g5Ki",author:"book-list-item_author__36aul",title:"book-list-item_title__3jXk-",image:"book-list-item_image__1KfFU"}}},[[43,1,2]]]);
//# sourceMappingURL=main.84ba6786.chunk.js.map