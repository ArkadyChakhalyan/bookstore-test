{"version":3,"sources":["components/book-list/book-list.module.css","components/app/app.module.css","components/error-indicator/error-indicator.module.css","components/loader/loader.tsx","actions/actions.tsx","services/bookstore-service.tsx","services/key.tsx","components/book-list/book-item/book-list-item.tsx","components/book-list/book-list.tsx","components/book-page/book-page.tsx","components/header/header.tsx","components/app/app.tsx","reducers/reducer.tsx","store.tsx","components/error-indicator/error-indicator.tsx","components/error-indicator/error-boundry/error-boundry.tsx","index.tsx","components/header/header.module.css","components/book-page/book-page.module.css","components/book-list/book-item/book-list-item.module.css"],"names":["module","exports","Loader","className","fetchBooksTC","bookstoreService","search","dispatch","type","getBooks","then","data","payload","catch","err","BookstoreService","_apiBase","_pagination","getResource","searchTerm","sortBy","startAt","category","a","searchTermAdjusted","split","join","sortedBy","startIndex","sortByCategory","fetch","res","ok","Error","status","json","booksFound","totalItems","booksLoaded","items","map","_transformBook","book","id","authors","volumeInfo","title","categories","description","image","imageLinks","thumbnail","BookListItem","history","useNavigate","authorList","styles","container","onClick","path","style","backgroundImage","info","author","BookList","loading","useSelector","state","books","currentSearch","useDispatch","loadMore","button","length","page","text","list","item","BookPage","bookId","find","categoryList","buttonText","left","right","Header","useState","setSearchTerm","setSortBy","setCategory","onSubmit","onFirstSearch","match","useMatch","useEffect","onKeyPress","e","key","input","onChange","target","value","placeholder","sorting","label","options","sortby","App","error","bookList","start","params","routes","element","elements","useRoutes","app","initialState","onBooksLoaded","newBooks","onFailure","onContinueSearch","onClearSearch","onClearData","store","createStore","action","applyMiddleware","thunkMiddleware","ErrorIndicator","ErrorBoundry","this","setState","props","children","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d952fb99.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"book-list_page__2LTpT\",\"text\":\"book-list_text__3fJgN\",\"list\":\"book-list_list__3ViVm\",\"button\":\"book-list_button__1QD5D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__M9MMq\",\"start\":\"app_start__1JS1W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"error-indicator_error__1rsSk\",\"title\":\"error-indicator_title__h9uQQ\",\"button\":\"error-indicator_button__3h7hC\"};","import './loader.css';\n\nexport const Loader = () => {\n    return (\n        <div className=\"loadingio-spinner-rolling-liig12v7lb\">\n            <div className=\"ldio-hd6l29vdydb\">\n                <div></div>\n            </div>\n        </div>\n    );\n};","import { Dispatch } from \"redux\";\nimport { SearchType, ServiceType } from \"../types\";\n\nconst booksRequested = () => {\n    return {\n        type: 'FETCH_BOOKS_REQUEST',\n    } as const;\n};\n\nconst booksLoaded = (newBooks: ServiceType) => {\n    return {\n        type: 'FETCH_BOOKS_SUCCESS',\n        payload: newBooks\n    } as const;\n};\n\nconst booksError = (error: object) => {\n    return {\n        type: 'FETCH_BOOKS_FAILURE',\n        payload: error\n    } as const;\n};\n\nconst clearData = () => {\n    return {\n        type: 'CLEAR_DATA'\n    } as const;\n};\n\nconst onFirstSearch = (search: SearchType) => {\n    return {\n        type: 'ON_FIRST_SEARCH',\n        payload: search\n    } as const;\n};\n\nconst onContinueSearch = (startAt: number) => {\n    return {\n        type: 'ON_CONTINUE_SEARCH',\n        payload: startAt\n    } as const;\n};\n\nconst clearSearch = () => {\n    return {\n        type: 'CLEAR_SEARCH'\n    } as const;\n};\n\nconst fetchBooksTC = (bookstoreService: any, search: SearchType) => {\n    return (dispatch: Dispatch) => { \n        dispatch(booksRequested());\n        bookstoreService.getBooks(search)\n            .then((data: ServiceType) => dispatch(booksLoaded(data)))\n            .catch((err: object) => dispatch(booksError(err)));\n    };\n};\n       \nexport {\n    booksRequested,\n    booksLoaded,\n    booksError,\n    fetchBooksTC,\n    onFirstSearch,\n    onContinueSearch,\n    clearSearch,\n    clearData\n};","import { BookType, SearchType } from \"../types\";\nimport { key } from \"./key\";\n\nexport default class BookstoreService {\n\n    _apiBase = 'https://www.googleapis.com/books/v1/volumes?q=';\n\n    _pagination = 30;\n\n    getResource = async (searchTerm: string, sortBy?: string, startAt?: number, category?: string) => {\n\n        const { _apiBase, _pagination } = this;\n\n        const searchTermAdjusted: string = searchTerm.split(' ').join('+');\n\n        const sortedBy = sortBy === 'newest' ? '&orderBy=newest' : '';\n        const startIndex = startAt ? `&startIndex=${startAt}` : '';\n        const sortByCategory = category !== 'all' ? `+subject:${category}`: '';\n        \n        const res = await fetch(\n            `${_apiBase}${searchTermAdjusted}${sortByCategory}&maxResults=${_pagination}${startIndex}${sortedBy}&printType=books&key=${key}`\n        );\n\n        if (!res.ok) {\n            throw new Error(`Could not fetch ${searchTerm}` +\n                `, recieved ${res.status}`)\n        }\n\n        return await res.json();\n    };\n\n    getBooks = async (search: SearchType) => {\n\n        const { searchTerm, sortBy, category, startAt } = search;\n\n        const res = await this.getResource(searchTerm, sortBy, startAt, category);\n        \n        return {\n            booksFound: res.totalItems,\n            booksLoaded: res.items.map(this._transformBook)\n        };\n    };\n\n    _transformBook = (book: any): BookType => {\n        return {\n            id: book.id,\n            authors: book.volumeInfo.authors || [''],\n            title: book.volumeInfo.title || '',\n            categories: book.volumeInfo.categories || [''],\n            description: book.volumeInfo.description || '',\n            image: book.volumeInfo.imageLinks.thumbnail || ''\n        };\n    };\n};","export const key = 'AIzaSyBeHQfr0O1DTsjDhj1eYM3r8LTwWfjwlyQ';","//@ts-ignore\nimport { useNavigate } from 'react-router-dom';\nimport { BookType } from '../../../types';\nimport styles from './book-list-item.module.css';\n\ntype BookListItemPropsType = {\n    book: BookType\n}\n\nexport const BookListItem = ({ book }: BookListItemPropsType) => {\n\n    const { title, categories, authors, image, id } = book;\n\n    const history = useNavigate();\n\n    const onClick = (id: string) => {\n        const path = `/${id}`;\n        history(path);\n    };\n\n    const authorList = authors.join(' / ');\n\n    return (\n        <div\n            className={styles.container}\n            onClick={() => onClick(id)} >\n            <div className={styles.image} style={{ backgroundImage: `url(${image})` }} />\n            <div className={styles.info}>\n                <p className={styles.category}>\n                    {categories[0]}\n                </p>\n                <p className={styles.title}>\n                    {title}\n                </p>\n                <p className={styles.author}>\n                    {authorList}\n                </p>\n            </div>\n        </div>\n    );\n};","import { Loader } from '../loader/loader';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StateType } from '../../types';\nimport styles from './book-list.module.css';\nimport { fetchBooksTC, onContinueSearch } from '../../actions/actions';\nimport BookstoreService from '../../services/bookstore-service';\nimport { BookListItem } from './book-item/book-list-item';\n\nconst bookstoreService = new BookstoreService();\n\nexport const BookList = () => {\n\n    const loading = useSelector((state: StateType) => state.loading);\n    const booksFound = useSelector((state: StateType) => state.books.booksFound);\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n    const currentSearch = useSelector((state: StateType) => state.currentSearch);\n\n    const dispatch = useDispatch();\n\n    const onClick = () => {\n\n        const search = {\n            ...currentSearch,\n            startAt: booksLoaded.length\n        };\n\n        dispatch(fetchBooksTC(bookstoreService, search));\n        dispatch(onContinueSearch(booksLoaded.length));\n    };\n\n    const loadMore = loading ? <Loader /> :\n        (\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                Load more\n            </button>\n        );\n\n    return (\n        <div className={styles.page} >\n            <p className={styles.text}><b>{booksFound}</b> books found</p>\n            <ul className={styles.list} >\n                {\n                    booksLoaded.map((item) => {\n                        return (\n                            <li key={item.id}>\n                                <BookListItem book={item} />\n                            </li>\n                        );\n                    })\n                }\n            </ul>\n            {booksLoaded.length >= booksFound ? null : loadMore}\n        </div>\n    );\n};","import { useNavigate } from 'react-router';\nimport { BookType } from '../../types';\nimport styles from './book-page.module.css';\n\ntype BookPagePropsType = {\n    books: BookType[]\n    bookId: string\n}\n\nexport const BookPage = ({ books, bookId }: BookPagePropsType) => {\n\n    const book: BookType = books.find((item) => {\n        return item.id === bookId;\n    })!;\n\n    const { title, image, categories, authors, description } = book;\n    \n    const categoryList = categories.join(' / ');\n    const authorList = authors.join(' / ');\n\n    const history = useNavigate();\n\n    const onClick = () => {\n        history('/');\n    };\n\n    return (\n        <div className={styles.page} >\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                <i className='fas fa-angle-left fa-2x' />\n                <p className={styles.buttonText} >back</p>\n            </button>\n            <div className={styles.left} >\n                <div className={styles.image} style={{ backgroundImage: `url(${image})` }} />\n            </div>\n            <div className={styles.right} >\n                <p className={styles.category} >{categoryList}</p>\n                <p className={styles.title} >{title}</p>\n                <p className={styles.author} >{authorList}</p>\n                <div className={styles.container} >\n                    <p className={styles.description} >{description}</p>\n                </div>\n            </div>\n        </div>\n    );\n};","import { useState, ChangeEvent, KeyboardEvent, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useMatch } from 'react-router';\nimport { clearData, clearSearch, fetchBooksTC, onFirstSearch } from '../../actions/actions';\nimport BookstoreService from '../../services/bookstore-service';\nimport { StateType } from '../../types';\nimport { Loader } from '../loader/loader';\nimport styles from './header.module.css';\n\nconst bookstoreService = new BookstoreService();\n\nexport const Header = () => {\n\n    const loading = useSelector((state: StateType) => state.loading);\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n\n    const dispatch = useDispatch();\n\n    const [searchTerm, setSearchTerm] = useState('');\n    const [sortBy, setSortBy] = useState('relevance');\n    const [category, setCategory] = useState('all');\n \n    const onSubmit = () => {\n \n        const search = {\n            searchTerm: searchTerm,\n            category: category,\n            sortBy: sortBy,\n            startAt: 0\n        };\n        dispatch(clearData());\n        dispatch(fetchBooksTC(bookstoreService, search));\n        dispatch(onFirstSearch(search));\n    };\n\n    const match = useMatch('/:id');\n\n    useEffect(() => {\n        if (booksLoaded.length > 0 && !match) {\n            onSubmit();\n        };\n    }, [sortBy, category]);\n\n    useEffect(() => {\n        dispatch(clearSearch());\n    }, [searchTerm, dispatch]);\n\n    const onKeyPress = (e: KeyboardEvent<HTMLDivElement>) => {\n        if(e.key === 'Enter') onSubmit();\n    };\n\n    const onSearchChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setSearchTerm(e.target.value);\n    };\n\n    const onCategoryChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        setCategory(e.target.value);\n    };\n\n    const onSortByChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        setSortBy(e.target.value);\n    };\n    \n    const search = loading ? <Loader /> : <i className=\"fas fa-search\" onClick={onSubmit}></i>;\n\n    return (\n        <div \n            className={styles.container}\n            onKeyPress={onKeyPress} >\n            <h1 className={styles.title} >\n                Search for books\n            </h1>\n            <div className={styles.search} >\n                <input\n                    className={styles.input}\n                    onChange={onSearchChange}\n                    placeholder='Search' />\n                <span className={styles.button} >\n                    {search}\n                </span>\n            </div>\n            <div className={styles.sorting} >\n                <span className={styles.categories} >\n                    <label className={styles.label} >Categories</label>\n                    <select\n                        className={styles.options}\n                        onChange={onCategoryChange} >\n                        <option>all</option>\n                        <option>art</option>\n                        <option>biography</option>\n                        <option>computers</option>\n                        <option>history</option>\n                        <option>medical</option>\n                        <option>poetry</option>\n                    </select>\n                </span>\n                <span className={styles.sortby} >\n                    <label className={styles.label} >Sorting by</label>\n                    <select\n                        className={styles.options}\n                        onChange={onSortByChange} >\n                        <option>relevance</option>\n                        <option>newest</option>\n                    </select>\n                </span>\n            </div>\n        </div>\n    );\n};","import { useSelector } from \"react-redux\";\nimport { RouteObject, useMatch, useRoutes } from \"react-router\";\nimport { StateType } from \"../../types\";\nimport { BookList } from \"../book-list/book-list\";\nimport { BookPage } from \"../book-page/book-page\";\nimport { Header } from \"../header/header\";\nimport { Loader } from \"../loader/loader\";\nimport styles from './app.module.css';\n\nexport const App = () => {\n\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n    const loading = useSelector((state: StateType) => state.loading);\n    const error = useSelector((state: StateType) => state.error); \n\n    const bookList = booksLoaded.length > 0 ?\n        <BookList />\n        : loading ? <Loader /> \n        : error ? \n        <p className={styles.start}>We couldn't find anything, try again!</p>\n        : <p className={styles.start}>Start searching for the book!</p>;\n\n    const match = useMatch('/:id');\n    const id: string = match?.params.id ? match?.params.id : '';\n\n    const routes: RouteObject[] = [ \n        {\n            path: '/',\n            element: bookList\n        },\n        {\n            path: ':id',\n            element: <BookPage \n                books={booksLoaded}\n                bookId={id} />\n        },\n        {\n            path: '*',\n            element: bookList\n        }\n    ];\n\n    let elements = useRoutes(routes);\n\n    return (\n        <div className={styles.app}>\n            <Header />\n            {elements}\n        </div>\n    );\n};","import { StateType, ActionTypes, ServiceType, SearchType } from \"../types\";\n\nconst initialState: StateType = {\n    books: {\n        booksFound: 0,\n        booksLoaded: []\n    },\n    currentSearch: {\n        searchTerm: '',\n        category: 'all',\n        sortBy: 'relevance',\n        startAt: 0\n    },\n    loading: false,\n    error: null\n}\n\nexport const reducer = (state: StateType | undefined = initialState, action: ActionTypes): StateType => {\n\n    switch (action.type) {\n        case 'FETCH_BOOKS_REQUEST':\n            return {\n                ...state,\n                loading: true,\n                error: null\n            };\n        case 'FETCH_BOOKS_SUCCESS':\n            return onBooksLoaded(state, action.payload);\n        case 'FETCH_BOOKS_FAILURE':\n            return onFailure(state, action.payload);\n        case 'ON_FIRST_SEARCH':\n            return onFirstSearch(state, action.payload);\n        case 'ON_CONTINUE_SEARCH':\n            return onContinueSearch(state, action.payload);\n        case 'CLEAR_SEARCH':\n            return onClearSearch(state);\n        case 'CLEAR_DATA':\n            return onClearData(state);\n        default:\n            return state;\n    }\n};\n\nconst onBooksLoaded = (state: StateType, payload: ServiceType) => {\n    \n    const { books } = state;\n\n    const newBooks = [\n        ...books.booksLoaded,\n        ...payload.booksLoaded\n    ]\n\n    return {\n        ...state,\n        books: {\n            booksFound: payload.booksFound,\n            booksLoaded: newBooks\n        },\n        loading: false,\n        error: null\n    }\n};\n\nconst onFailure = (state: StateType, payload: object) => {\n    return {\n        ...state,\n        loading: false,\n        error: payload\n    };\n};\n\nconst onFirstSearch = (state: StateType, payload: SearchType) => {\n    return {\n        ...state,\n        currentSearch: payload\n    };\n};\n\nconst onContinueSearch = (state: StateType, payload: number) => {\n    return {\n        ...state,\n        currentSearch: {\n            ...state.currentSearch,\n            startAt: payload\n        }\n    };\n};\n\nconst onClearSearch = (state: StateType) => {\n    return {\n        ...state,\n        currentSearch: {\n            searchTerm: '',\n            category: 'all',\n            sortBy: 'relevance',\n            startAt: 0\n        }\n    };\n};\n\nconst onClearData = (state: StateType) => {\n    return {\n        ...state,\n        books: {\n            booksFound: 0,\n            booksLoaded: []\n        }\n    };\n};\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { reducer } from \"./reducers/reducer\";\n\nexport const store = createStore(reducer, applyMiddleware(thunkMiddleware));","import { useNavigate } from 'react-router';\nimport styles from './error-indicator.module.css';\n\nexport const ErrorIndicator = () => {\n\n    const history = useNavigate();\n\n    const onClick = () => {\n        history('/');\n    };\n\n    return (\n        <div className={styles.error}>\n            <p className={styles.title}>Error!</p>\n            <p>Something went wrong</p>\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                Go to homepage\n            </button>\n        </div>\n    );\n};","import { Component } from 'react';\nimport { ErrorIndicator } from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n    state = {\n        error: false\n    };\n\n    componentDidCatch() {\n        this.setState({ error: true });\n    };\n\n    render() {\n        if (this.state.error) {\n            return <ErrorIndicator />;\n        }\n\n        return this.props.children;\n    };\n};","import { StrictMode } from 'react';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router}  from 'react-router-dom';\nimport { App } from './components/app/app';\nimport { store } from './store';\nimport ReactDOM from 'react-dom';\nimport ErrorBoundry from './components/error-indicator/error-boundry/error-boundry';\nimport './index.css';\n\nReactDOM.render(\n  <StrictMode>\n    <Provider store={store}>\n      <ErrorBoundry>\n        <Router>\n          <App />\n        </Router>\n      </ErrorBoundry>\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"header_container__Qg6Mi\",\"title\":\"header_title__1DXxp\",\"input\":\"header_input__2cfQn\",\"sorting\":\"header_sorting__1op8t\",\"label\":\"header_label__5gY9r\",\"options\":\"header_options__2uQYe\",\"categories\":\"header_categories__Hrmmh\",\"sortby\":\"header_sortby__2njdc\",\"search\":\"header_search__130F1\",\"button\":\"header_button__G3RR8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"book-page_page__3w5u0\",\"left\":\"book-page_left__2JpXO\",\"image\":\"book-page_image__38L3Z\",\"right\":\"book-page_right__2th9H\",\"category\":\"book-page_category__iB54K\",\"title\":\"book-page_title__1Hoja\",\"author\":\"book-page_author__2cELh\",\"container\":\"book-page_container__2guiP\",\"description\":\"book-page_description__kSeF4\",\"button\":\"book-page_button__8cSDH\",\"buttonText\":\"book-page_buttonText__2G3oX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"book-list-item_container__3YSdd\",\"info\":\"book-list-item_info__1v0FZ\",\"category\":\"book-list-item_category__3g5Ki\",\"author\":\"book-list-item_author__36aul\",\"title\":\"book-list-item_title__3jXk-\",\"image\":\"book-list-item_image__1KfFU\"};"],"sourceRoot":""}