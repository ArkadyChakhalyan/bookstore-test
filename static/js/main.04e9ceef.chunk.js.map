{"version":3,"sources":["components/book-list/book-list.module.css","components/app/app.module.css","components/error-indicator/error-indicator.module.css","components/loader/loader.module.css","components/loader/loader.tsx","actions/actions.tsx","services/bookstore-service.tsx","services/key.tsx","components/book-list/book-item/book-list-item.tsx","components/book-list/book-list.tsx","components/book-page/book-page.tsx","components/header/header.tsx","components/app/app.tsx","reducers/reducer.tsx","store.tsx","components/error-indicator/error-indicator.tsx","components/error-indicator/error-boundry/error-boundry.tsx","index.tsx","components/header/header.module.css","components/book-page/book-page.module.css","components/book-list/book-item/book-list-item.module.css"],"names":["module","exports","Loader","className","styles","outside","inside","fetchBooksTC","bookstoreService","search","dispatch","type","getBooks","then","data","payload","catch","err","BookstoreService","_apiBase","_pagination","getResource","searchTerm","sortBy","startAt","category","a","searchTermAdjusted","split","join","sortedBy","startIndex","sortByCategory","fetch","res","ok","Error","status","json","booksFound","totalItems","booksLoaded","items","map","_transformBook","book","id","authors","volumeInfo","title","categories","description","image","imageLinks","thumbnail","BookListItem","navigate","useNavigate","authorList","container","onClick","path","style","backgroundImage","info","author","BookList","loading","useSelector","state","books","currentSearch","useDispatch","loadMore","button","length","toString","page","text","list","item","load","BookPage","bookId","find","categoryList","buttonText","left","right","Header","useState","setSearchTerm","setSortBy","setCategory","onSubmit","onFirstSearch","match","useMatch","useEffect","form","onKeyPress","e","key","input","onChange","target","value","placeholder","sorting","label","options","sortby","App","error","bookList","start","params","routes","element","elements","useRoutes","app","initialState","onBooksLoaded","newBooks","onFailure","onContinueSearch","onClearSearch","onClearData","store","createStore","action","applyMiddleware","thunkMiddleware","ErrorIndicator","setError","ErrorBoundry","setState","this","props","children","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.04e9ceef.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"book-list_page__2LTpT\",\"text\":\"book-list_text__3fJgN\",\"list\":\"book-list_list__3ViVm\",\"load\":\"book-list_load__3EOCR\",\"button\":\"book-list_button__1QD5D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__M9MMq\",\"start\":\"app_start__1JS1W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"error-indicator_error__1rsSk\",\"title\":\"error-indicator_title__h9uQQ\",\"button\":\"error-indicator_button__3h7hC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inside\":\"loader_inside__2XuVw\",\"animation\":\"loader_animation__226S_\",\"outside\":\"loader_outside__cVwyH\"};","import styles from './loader.module.css';\n\nexport const Loader = () => {\n    return (\n        <div className={styles.outside}>\n            <div className={styles.inside}>\n                <div />\n            </div>\n        </div>\n    );\n};","import { Dispatch } from \"redux\";\nimport { SearchType, ServiceType } from \"../types\";\n\nconst booksRequested = () => {\n    return {\n        type: 'FETCH_BOOKS_REQUEST',\n    } as const;\n};\n\nconst booksLoaded = (newBooks: ServiceType) => {\n    return {\n        type: 'FETCH_BOOKS_SUCCESS',\n        payload: newBooks\n    } as const;\n};\n\nconst booksError = (error: object) => {\n    return {\n        type: 'FETCH_BOOKS_FAILURE',\n        payload: error\n    } as const;\n};\n\nconst clearData = () => {\n    return {\n        type: 'CLEAR_DATA'\n    } as const;\n};\n\nconst onFirstSearch = (search: SearchType) => {\n    return {\n        type: 'ON_FIRST_SEARCH',\n        payload: search\n    } as const;\n};\n\nconst onContinueSearch = (startAt: string) => {\n    return {\n        type: 'ON_CONTINUE_SEARCH',\n        payload: startAt\n    } as const;\n};\n\nconst clearSearch = () => {\n    return {\n        type: 'CLEAR_SEARCH'\n    } as const;\n};\n\nconst fetchBooksTC = (bookstoreService: any, search: SearchType) => {\n    return (dispatch: Dispatch) => { \n        dispatch(booksRequested());\n        bookstoreService.getBooks(search)\n            .then((data: ServiceType) => dispatch(booksLoaded(data)))\n            .catch((err: object) => dispatch(booksError(err)));\n    };\n};\n       \nexport {\n    booksRequested,\n    booksLoaded,\n    booksError,\n    fetchBooksTC,\n    onFirstSearch,\n    onContinueSearch,\n    clearSearch,\n    clearData\n};","import { BookType, SearchType } from \"../types\";\nimport { key } from \"./key\";\n\nexport default class BookstoreService {\n\n    _apiBase = 'https://www.googleapis.com/books/v1/volumes?q=';\n\n    _pagination = 30;\n\n    getResource = async (searchTerm: string, sortBy?: string, startAt?: string, category?: string) => {\n\n        const { _apiBase, _pagination } = this;\n\n        const searchTermAdjusted: string = searchTerm.split(' ').join('+');\n\n        const sortedBy = sortBy === 'newest' ? '&orderBy=newest' : '';\n        const startIndex = startAt ? `&startIndex=${startAt}` : '';\n        const sortByCategory = category !== 'all' ? `+subject:${category}`: '';\n        \n        const res = await fetch(\n            `${_apiBase}${searchTermAdjusted}${sortByCategory}&maxResults=${_pagination}${startIndex}${sortedBy}&printType=books&key=${key}`\n        );\n\n        if (!res.ok) {\n            throw new Error(`Could not fetch ${searchTerm}` +\n                `, recieved ${res.status}`)\n        }\n\n        return await res.json();\n    };\n\n    getBooks = async (search: SearchType) => {\n\n        const { searchTerm, sortBy, category, startAt } = search;\n\n        const res = await this.getResource(searchTerm, sortBy, startAt, category);\n        \n        return {\n            booksFound: res.totalItems,\n            booksLoaded: res.items.map(this._transformBook)\n        };\n    };\n\n    _transformBook = (book: any): BookType => {\n        return {\n            id: book.id,\n            authors: book.volumeInfo.authors || [''],\n            title: book.volumeInfo.title || '',\n            categories: book.volumeInfo.categories || [''],\n            description: book.volumeInfo.description || '',\n            image: book.volumeInfo.imageLinks.thumbnail || ''\n        };\n    };\n};","export const key = 'AIzaSyBeHQfr0O1DTsjDhj1eYM3r8LTwWfjwlyQ';","import { useNavigate } from 'react-router-dom';\nimport { BookType } from '../../../types';\nimport styles from './book-list-item.module.css';\n\ntype BookListItemPropsType = {\n    book: BookType\n}\n\nexport const BookListItem = ({ book }: BookListItemPropsType) => {\n\n    const { title, categories, authors, image, id } = book;\n\n    const navigate = useNavigate();\n\n    const onClick = (id: string) => {\n        const path = `/${id}`;\n        navigate(path);\n    };\n\n    const authorList = authors.join(' / ');\n\n    return (\n        <div\n            className={styles.container}\n            onClick={() => onClick(id)} >\n            <div className={styles.image} style={{ backgroundImage: `url(${image})` }} />\n            <div className={styles.info}>\n                <p className={styles.category}>\n                    {categories[0]}\n                </p>\n                <p className={styles.title}>\n                    {title}\n                </p>\n                <p className={styles.author}>\n                    {authorList}\n                </p>\n            </div>\n        </div>\n    );\n};","import { Loader } from '../loader/loader';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StateType } from '../../types';\nimport styles from './book-list.module.css';\nimport { fetchBooksTC, onContinueSearch } from '../../actions/actions';\nimport BookstoreService from '../../services/bookstore-service';\nimport { BookListItem } from './book-item/book-list-item';\n\nconst bookstoreService = new BookstoreService();\n\nexport const BookList = () => {\n\n    const loading = useSelector((state: StateType) => state.loading);\n    const booksFound = useSelector((state: StateType) => state.books.booksFound);\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n    const currentSearch = useSelector((state: StateType) => state.currentSearch);\n\n    const dispatch = useDispatch();\n\n    const onClick = () => {\n\n        const search = {\n            ...currentSearch,\n            startAt: booksLoaded.length.toString()\n        };\n\n        dispatch(fetchBooksTC(bookstoreService, search));\n        dispatch(onContinueSearch(booksLoaded.length.toString()));\n    };\n\n    const loadMore = loading ? <Loader /> :\n        (\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                Load more\n            </button>\n        );\n\n    return (\n        <div className={styles.page} >\n            <p className={styles.text}><b>{booksFound}</b> books found</p>\n            <ul className={styles.list} >\n                {\n                    booksLoaded.map((item) => {\n                        return (\n                            <li key={item.id}>\n                                <BookListItem book={item} />\n                            </li>\n                        );\n                    })\n                }\n            </ul>\n            <div className={styles.load}>\n                {booksLoaded.length >= booksFound ? null : loadMore}\n            </div>\n        </div>\n    );\n};","import { useNavigate } from 'react-router';\nimport { BookType } from '../../types';\nimport styles from './book-page.module.css';\n\ntype BookPagePropsType = {\n    books: BookType[]\n    bookId: string\n}\n\nexport const BookPage = ({ books, bookId }: BookPagePropsType) => {\n\n    const book: BookType = books.find((item) => {\n        return item.id === bookId;\n    })!;\n\n    const { title, image, categories, authors, description } = book;\n    \n    const categoryList = categories.join(' / ');\n    const authorList = authors.join(' / ');\n\n    const navigate = useNavigate();\n\n    const onClick = () => {\n        navigate(-1);\n    };\n\n    return (\n        <div className={styles.page} >\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                <i className='fas fa-angle-left fa-2x' />\n                <p className={styles.buttonText} >back</p>\n            </button>\n            <div className={styles.left} >\n                <div className={styles.image} style={{ backgroundImage: `url(${image})` }} />\n            </div>\n            <div className={styles.right} >\n                <p className={styles.category} >{categoryList}</p>\n                <p className={styles.title} >{title}</p>\n                <p className={styles.author} >{authorList}</p>\n                <div className={styles.container} >\n                    <p className={styles.description} >{description}</p>\n                </div>\n            </div>\n        </div>\n    );\n};","import { useState, ChangeEvent, KeyboardEvent, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useMatch } from 'react-router';\nimport { clearData, clearSearch, fetchBooksTC, onFirstSearch } from '../../actions/actions';\nimport BookstoreService from '../../services/bookstore-service';\nimport { StateType } from '../../types';\nimport { Loader } from '../loader/loader';\nimport styles from './header.module.css';\n\nconst bookstoreService = new BookstoreService();\n\nexport const Header = () => {\n\n    const loading = useSelector((state: StateType) => state.loading);\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n\n    const dispatch = useDispatch();\n    \n    const [searchTerm, setSearchTerm] = useState('');\n    const [sortBy, setSortBy] = useState('relevance');\n    const [category, setCategory] = useState('all');\n\n    const onSubmit = () => {\n\n        const search = {\n            searchTerm: searchTerm,\n            category: category,\n            sortBy: sortBy,\n            startAt: '0'\n        };\n        \n        dispatch(clearData());\n        dispatch(fetchBooksTC(bookstoreService, search));\n        dispatch(onFirstSearch(search));\n    };\n\n    const match = useMatch('/:id');\n\n    useEffect(() => {\n        if (booksLoaded.length > 0 && !match) {\n            onSubmit();\n        };\n    }, [sortBy, category]);\n\n    useEffect(() => {\n        dispatch(clearSearch());\n    }, [searchTerm, dispatch]);\n\n    const onKeyPress = (e: KeyboardEvent<HTMLFormElement>) => {\n        if (e.key === 'Enter') onSubmit();\n    };\n\n    const onSearchChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setSearchTerm(e.target.value);\n    };\n\n    const onCategoryChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        setCategory(e.target.value);\n    };\n\n    const onSortByChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        setSortBy(e.target.value);\n    };\n\n    const search = loading ? <Loader />\n        : <button className={styles.button} type='submit'>\n            <i className=\"fas fa-search\"></i>\n        </button>;\n\n    return (\n        <div className={styles.container} >\n            <h1 className={styles.title} >\n                Search for books\n            </h1>\n            <form\n                className={styles.form}\n                onSubmit={onSubmit}\n                onKeyPress={onKeyPress}>\n                <div className={styles.search} >\n                    <input\n                        className={styles.input}\n                        onChange={onSearchChange}\n                        placeholder='Search' />\n                    <span className={styles.button} >\n                        {search}\n                    </span>\n                </div>\n                <div className={styles.sorting} >\n                    <span className={styles.categories} >\n                        <label className={styles.label} >Categories</label>\n                        <select\n                            className={styles.options}\n                            onChange={onCategoryChange} >\n                            <option>all</option>\n                            <option>art</option>\n                            <option>biography</option>\n                            <option>computers</option>\n                            <option>history</option>\n                            <option>medical</option>\n                            <option>poetry</option>\n                        </select>\n                    </span>\n                    <span className={styles.sortby} >\n                        <label className={styles.label} >Sorting by</label>\n                        <select\n                            className={styles.options}\n                            onChange={onSortByChange} >\n                            <option>relevance</option>\n                            <option>newest</option>\n                        </select>\n                    </span>\n                </div>\n            </form>\n        </div>\n    );\n};","import { useSelector } from \"react-redux\";\nimport { RouteObject, useMatch, useRoutes } from \"react-router\";\nimport { StateType } from \"../../types\";\nimport { BookList } from \"../book-list/book-list\";\nimport { BookPage } from \"../book-page/book-page\";\nimport { Header } from \"../header/header\";\nimport { Loader } from \"../loader/loader\";\nimport styles from './app.module.css';\n\nexport const App = () => {\n\n    const booksLoaded = useSelector((state: StateType) => state.books.booksLoaded);\n    const loading = useSelector((state: StateType) => state.loading);\n    const error = useSelector((state: StateType) => state.error); \n\n    const bookList = booksLoaded.length > 0 ?\n        <BookList />\n        : loading ? <Loader /> \n        : error ? \n        <p className={styles.start}>We couldn't find anything, try again!</p>\n        : <p className={styles.start}>Start searching for the book!</p>;\n\n    const match = useMatch('/:id');\n    const id: string = match?.params.id ? match?.params.id : '';\n\n    const routes: RouteObject[] = [ \n        {\n            path: '/',\n            element: bookList,\n        },\n        {\n            path: '/:id',\n            element: <BookPage \n                books={booksLoaded}\n                bookId={id} />\n        }\n    ];\n\n    let elements = useRoutes(routes);\n\n    return (\n        <div className={styles.app}>\n            <Header />\n            {elements}\n        </div>\n    );\n};\n\n","import { StateType, ActionTypes, ServiceType, SearchType } from \"../types\";\n\nconst initialState: StateType = {\n    books: {\n        booksFound: 0,\n        booksLoaded: []\n    },\n    currentSearch: {\n        searchTerm: '',\n        category: 'all',\n        sortBy: 'relevance',\n        startAt: '0'\n    },\n    loading: false,\n    error: null\n}\n\nexport const reducer = (state: StateType | undefined = initialState, action: ActionTypes): StateType => {\n\n    switch (action.type) {\n        case 'FETCH_BOOKS_REQUEST':\n            return {\n                ...state,\n                loading: true,\n                error: null\n            };\n        case 'FETCH_BOOKS_SUCCESS':\n            return onBooksLoaded(state, action.payload);\n        case 'FETCH_BOOKS_FAILURE':\n            return onFailure(state, action.payload);\n        case 'ON_FIRST_SEARCH':\n            return onFirstSearch(state, action.payload);\n        case 'ON_CONTINUE_SEARCH':\n            return onContinueSearch(state, action.payload);\n        case 'CLEAR_SEARCH':\n            return onClearSearch(state);\n        case 'CLEAR_DATA':\n            return onClearData(state);\n        default:\n            return state;\n    }\n};\n\nconst onBooksLoaded = (state: StateType, payload: ServiceType) => {\n    \n    const { books } = state;\n\n    const newBooks = [\n        ...books.booksLoaded,\n        ...payload.booksLoaded\n    ]\n\n    return {\n        ...state,\n        books: {\n            booksFound: payload.booksFound,\n            booksLoaded: newBooks\n        },\n        loading: false,\n        error: null\n    }\n};\n\nconst onFailure = (state: StateType, payload: object) => {\n    return {\n        ...state,\n        loading: false,\n        error: payload\n    };\n};\n\nconst onFirstSearch = (state: StateType, payload: SearchType) => {\n    return {\n        ...state,\n        currentSearch: payload\n    };\n};\n\nconst onContinueSearch = (state: StateType, payload: string) => {\n    return {\n        ...state,\n        currentSearch: {\n            ...state.currentSearch,\n            startAt: payload\n        }\n    };\n};\n\nconst onClearSearch = (state: StateType) => {\n    return {\n        ...state,\n        currentSearch: {\n            searchTerm: '',\n            category: 'all',\n            sortBy: 'relevance',\n            startAt: '0'\n        }\n    };\n};\n\nconst onClearData = (state: StateType) => {\n    return {\n        ...state,\n        books: {\n            booksFound: 0,\n            booksLoaded: []\n        }\n    };\n};\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { reducer } from \"./reducers/reducer\";\n\nexport const store = createStore(reducer, applyMiddleware(thunkMiddleware));","import { useNavigate } from 'react-router';\nimport styles from './error-indicator.module.css';\n\ntype ErrorIndicatorPropsTypes = {\n    setError: Function\n}\n\nexport const ErrorIndicator = ({ setError }: ErrorIndicatorPropsTypes ) => {\n\n    const navigate = useNavigate();\n\n    const onClick = () => {\n        setError();\n        navigate('/');\n    };\n\n    return (\n        <div className={styles.error}>\n            <p className={styles.title}>Error!</p>\n            <p>Something went wrong, try again!</p>\n            <button\n                className={styles.button}\n                onClick={onClick} >\n                Go to homepage\n            </button>\n        </div>\n    );\n};","import { Component } from 'react';\nimport { ErrorIndicator } from '../error-indicator';\n\nexport default class ErrorBoundry extends Component { \n    \n    state = {\n        error: false\n    };\n\n    componentDidCatch() {\n        this.setState({ error: true });\n    };\n\n    setError = () => {\n        this.setState({ error: false });\n    };\n\n    render() {\n        if (this.state.error) {\n            return <ErrorIndicator setError={this.setError} />;\n        }\n\n        return this.props.children;\n    };\n};","import { StrictMode } from 'react';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { App } from './components/app/app';\nimport { store } from './store';\nimport ReactDOM from 'react-dom';\nimport ErrorBoundry from './components/error-indicator/error-boundry/error-boundry';\nimport './index.css';\n\nReactDOM.render(\n  <StrictMode>\n    <Provider store={store}>\n      <Router>\n        <ErrorBoundry>\n          <App />\n        </ErrorBoundry>\n      </Router>\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"header_container__Qg6Mi\",\"title\":\"header_title__1DXxp\",\"input\":\"header_input__2cfQn\",\"sorting\":\"header_sorting__1op8t\",\"form\":\"header_form__CKDVN\",\"label\":\"header_label__5gY9r\",\"options\":\"header_options__2uQYe\",\"categories\":\"header_categories__Hrmmh\",\"sortby\":\"header_sortby__2njdc\",\"search\":\"header_search__130F1\",\"button\":\"header_button__G3RR8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"book-page_page__3w5u0\",\"left\":\"book-page_left__2JpXO\",\"image\":\"book-page_image__38L3Z\",\"right\":\"book-page_right__2th9H\",\"category\":\"book-page_category__iB54K\",\"title\":\"book-page_title__1Hoja\",\"author\":\"book-page_author__2cELh\",\"container\":\"book-page_container__2guiP\",\"description\":\"book-page_description__kSeF4\",\"button\":\"book-page_button__8cSDH\",\"buttonText\":\"book-page_buttonText__2G3oX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"book-list-item_container__3YSdd\",\"info\":\"book-list-item_info__1v0FZ\",\"category\":\"book-list-item_category__3g5Ki\",\"author\":\"book-list-item_author__36aul\",\"title\":\"book-list-item_title__3jXk-\",\"image\":\"book-list-item_image__1KfFU\"};"],"sourceRoot":""}