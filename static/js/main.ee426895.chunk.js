(this["webpackJsonpbookstore-test"]=this["webpackJsonpbookstore-test"]||[]).push([[0],{11:function(e,t,a){e.exports={page:"book-list_page__2LTpT",text:"book-list_text__3fJgN",list:"book-list_list__3ViVm",load:"book-list_load__3EOCR",button:"book-list_button__1QD5D"}},16:function(e,t,a){e.exports={app:"app_app__M9MMq",start:"app_start__1JS1W"}},17:function(e,t,a){e.exports={error:"error-indicator_error__1rsSk",title:"error-indicator_title__h9uQQ",button:"error-indicator_button__3h7hC"}},21:function(e,t,a){e.exports={inside:"loader_inside__2XuVw",animation:"loader_animation__226S_",outside:"loader_outside__cVwyH"}},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(4),c=a(19),r=a(2),s=a(3),i=a(21),l=a.n(i),b=a(1),u=function(){return Object(b.jsx)("div",{className:l.a.outside,children:Object(b.jsx)("div",{className:l.a.inside,children:Object(b.jsx)("div",{})})})},j=a(11),d=a.n(j),h=function(e,t){return function(a){a({type:"FETCH_BOOKS_REQUEST"}),e.getBooks(t).then((function(e){return a({type:"FETCH_BOOKS_SUCCESS",payload:e})})).catch((function(e){return a({type:"FETCH_BOOKS_FAILURE",payload:e})}))}},_=a(13),O=a.n(_),p=a(22),f=a(15),m=function e(){var t=this;Object(f.a)(this,e),this._apiBase="https://www.googleapis.com/books/v1/volumes?q=",this._pagination=30,this.getResource=function(){var e=Object(p.a)(O.a.mark((function e(a,n,o,c){var r,s,i,l,b,u,j;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._apiBase,s=t._pagination,i=a.split(" ").join("+"),l="newest"===n?"&orderBy=newest":"",b=o?"&startIndex=".concat(o):"",u="all"!==c?"+subject:".concat(c):"",e.next=7,fetch("".concat(r).concat(i).concat(u,"&maxResults=").concat(s).concat(b).concat(l,"&printType=books&key=").concat("AIzaSyBeHQfr0O1DTsjDhj1eYM3r8LTwWfjwlyQ"));case 7:if((j=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(a)+", recieved ".concat(j.status));case 10:return e.next=12,j.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n,o){return e.apply(this,arguments)}}(),this.getBooks=function(){var e=Object(p.a)(O.a.mark((function e(a){var n,o,c,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.searchTerm,o=a.sortBy,c=a.category,r=a.startAt,e.next=3,t.getResource(n,o,r,c);case 3:return s=e.sent,e.abrupt("return",{booksFound:s.totalItems,booksLoaded:s.items.map(t._transformBook)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformBook=function(e){return{id:e.id,authors:e.volumeInfo.authors||[""],title:e.volumeInfo.title||"",categories:e.volumeInfo.categories||[""],description:e.volumeInfo.description||"",image:e.volumeInfo.imageLinks.thumbnail||""}}},g=a(9),x=a.n(g),k=function(e){var t=e.book,a=t.title,n=t.categories,o=t.authors,c=t.image,s=t.id,i=Object(r.e)(),l=o.join(" / ");return Object(b.jsxs)("div",{className:x.a.container,onClick:function(){return function(e){var t="/".concat(e);i(t)}(s)},children:[Object(b.jsx)("div",{className:x.a.image,style:{backgroundImage:"url(".concat(c,")")}}),Object(b.jsxs)("div",{className:x.a.info,children:[Object(b.jsx)("p",{className:x.a.category,children:n[0]}),Object(b.jsx)("p",{className:x.a.title,children:a}),Object(b.jsx)("p",{className:x.a.author,children:l})]})]})},v=new m,y=function(){var e=Object(o.c)((function(e){return e.loading})),t=Object(o.c)((function(e){return e.books.booksFound})),a=Object(o.c)((function(e){return e.books.booksLoaded})),n=Object(o.c)((function(e){return e.currentSearch})),c=Object(o.b)(),r=e?Object(b.jsx)(u,{}):Object(b.jsx)("button",{className:d.a.button,onClick:function(){var e=Object(s.a)(Object(s.a)({},n),{},{startAt:a.length.toString()});c(h(v,e)),c({type:"ON_CONTINUE_SEARCH",payload:a.length.toString()})},children:"Load more"});return Object(b.jsxs)("div",{className:d.a.page,children:[Object(b.jsxs)("p",{className:d.a.text,children:[Object(b.jsx)("b",{children:t})," books found"]}),Object(b.jsx)("ul",{className:d.a.list,children:a.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(k,{book:e})},e.id)}))}),Object(b.jsx)("div",{className:d.a.load,children:a.length>=t?null:r})]})},N=a(7),S=a.n(N),E=function(e){var t=e.books,a=e.bookId,n=t.find((function(e){return e.id===a})),o=n.title,c=n.image,s=n.categories,i=n.authors,l=n.description,u=s.join(" / "),j=i.join(" / "),d=Object(r.e)();return Object(b.jsxs)("div",{className:S.a.page,children:[Object(b.jsxs)("button",{className:S.a.button,onClick:function(){d(-1)},children:[Object(b.jsx)("i",{className:"fas fa-angle-left fa-2x"}),Object(b.jsx)("p",{className:S.a.buttonText,children:"back"})]}),Object(b.jsx)("div",{className:S.a.left,children:Object(b.jsx)("div",{className:S.a.image,style:{backgroundImage:"url(".concat(c,")")}})}),Object(b.jsxs)("div",{className:S.a.right,children:[Object(b.jsx)("p",{className:S.a.category,children:u}),Object(b.jsx)("p",{className:S.a.title,children:o}),Object(b.jsx)("p",{className:S.a.author,children:j}),Object(b.jsx)("div",{className:S.a.container,children:Object(b.jsx)("p",{className:S.a.description,children:l})})]})]})},C=a(8),T=a(5),w=a.n(T),A=new m,R=function(){var e=Object(o.c)((function(e){return e.loading})),t=Object(o.c)((function(e){return e.books.booksLoaded})),a=Object(o.b)(),c=Object(n.useState)(""),s=Object(C.a)(c,2),i=s[0],l=s[1],j=Object(n.useState)("relevance"),d=Object(C.a)(j,2),_=d[0],O=d[1],p=Object(n.useState)("all"),f=Object(C.a)(p,2),m=f[0],g=f[1],x=Object(r.e)(),k=function(){x("/",{replace:!0});var e={searchTerm:i,category:m,sortBy:_,startAt:"0"};a({type:"CLEAR_DATA"}),a(h(A,e)),a(function(e){return{type:"ON_FIRST_SEARCH",payload:e}}(e))},v=Object(r.d)("/:id");Object(n.useEffect)((function(){t.length>0&&!v&&k()}),[_,m]),Object(n.useEffect)((function(){a({type:"CLEAR_SEARCH"})}),[i,a]);var y=e?Object(b.jsx)(u,{}):Object(b.jsx)("button",{className:w.a.button,type:"submit",children:Object(b.jsx)("i",{className:"fas fa-search"})});return Object(b.jsxs)("div",{className:w.a.container,children:[Object(b.jsx)("h1",{className:w.a.title,children:"Search for books"}),Object(b.jsxs)("form",{className:w.a.form,onSubmit:k,onKeyPress:function(e){"Enter"===e.key&&k()},children:[Object(b.jsxs)("div",{className:w.a.search,children:[Object(b.jsx)("input",{className:w.a.input,onChange:function(e){l(e.target.value)},placeholder:"Search"}),Object(b.jsx)("span",{className:w.a.button,children:y})]}),Object(b.jsxs)("div",{className:w.a.sorting,children:[Object(b.jsxs)("span",{className:w.a.categories,children:[Object(b.jsx)("label",{className:w.a.label,children:"Categories"}),Object(b.jsxs)("select",{className:w.a.options,onChange:function(e){g(e.target.value)},children:[Object(b.jsx)("option",{children:"all"}),Object(b.jsx)("option",{children:"art"}),Object(b.jsx)("option",{children:"biography"}),Object(b.jsx)("option",{children:"computers"}),Object(b.jsx)("option",{children:"history"}),Object(b.jsx)("option",{children:"medical"}),Object(b.jsx)("option",{children:"poetry"})]})]}),Object(b.jsxs)("span",{className:w.a.sortby,children:[Object(b.jsx)("label",{className:w.a.label,children:"Sorting by"}),Object(b.jsxs)("select",{className:w.a.options,onChange:function(e){O(e.target.value)},children:[Object(b.jsx)("option",{children:"relevance"}),Object(b.jsx)("option",{children:"newest"})]})]})]})]})]})},L=a(16),B=a.n(L),F=function(){var e=Object(o.c)((function(e){return e.books.booksLoaded})),t=Object(o.c)((function(e){return e.loading})),a=Object(o.c)((function(e){return e.error})),n=e.length>0?Object(b.jsx)(y,{}):t?Object(b.jsx)(u,{}):a?Object(b.jsx)("p",{className:B.a.start,children:"We couldn't find anything, try again!"}):Object(b.jsx)("p",{className:B.a.start,children:"Start searching for the book!"}),c=Object(r.d)("/:id"),s=(null===c||void 0===c?void 0:c.params.id)?null===c||void 0===c?void 0:c.params.id:"",i=[{path:"/",element:n},{path:":id",element:Object(b.jsx)(E,{books:e,bookId:s})}],l=Object(r.g)(i);return Object(b.jsxs)("div",{className:B.a.app,children:[Object(b.jsx)(R,{}),l]})},I=a(23),H=a(26),K=a(24),D={books:{booksFound:0,booksLoaded:[]},currentSearch:{searchTerm:"",category:"all",sortBy:"relevance",startAt:"0"},loading:!1,error:null},Q=function(e,t){var a=e.books,n=[].concat(Object(K.a)(a.booksLoaded),Object(K.a)(t.booksLoaded));return Object(s.a)(Object(s.a)({},e),{},{books:{booksFound:t.booksFound,booksLoaded:n},loading:!1,error:null})},U=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t})},M=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{currentSearch:t})},J=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{currentSearch:Object(s.a)(Object(s.a)({},e.currentSearch),{},{startAt:t})})},V=function(e){return Object(s.a)(Object(s.a)({},e),{},{currentSearch:{searchTerm:"",category:"all",sortBy:"relevance",startAt:"0"}})},X=function(e){return Object(s.a)(Object(s.a)({},e),{},{books:{booksFound:0,booksLoaded:[]}})},Y=Object(I.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOOKS_REQUEST":return Object(s.a)(Object(s.a)({},e),{},{loading:!0,error:null});case"FETCH_BOOKS_SUCCESS":return Q(e,t.payload);case"FETCH_BOOKS_FAILURE":return U(e,t.payload);case"ON_FIRST_SEARCH":return M(e,t.payload);case"ON_CONTINUE_SEARCH":return J(e,t.payload);case"CLEAR_SEARCH":return V(e);case"CLEAR_DATA":return X(e);default:return e}}),Object(I.a)(H.a)),G=a(14),W=a.n(G),q=a(27),P=a(29),Z=a(28),z=a(17),$=a.n(z),ee=function(e){var t=e.setError,a=Object(r.e)();return Object(b.jsxs)("div",{className:$.a.error,children:[Object(b.jsx)("p",{className:$.a.title,children:"Error!"}),Object(b.jsx)("p",{children:"Something went wrong, try again!"}),Object(b.jsx)("button",{className:$.a.button,onClick:function(){t(),a("/")},children:"Go to homepage"})]})},te=function(e){Object(P.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={error:!1},e.setError=function(){e.setState({error:!1})},e}return Object(q.a)(a,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(b.jsx)(ee,{setError:this.setError}):this.props.children}}]),a}(n.Component);a(42);W.a.render(Object(b.jsx)(n.StrictMode,{children:Object(b.jsx)(o.a,{store:Y,children:Object(b.jsx)(c.a,{children:Object(b.jsx)(te,{children:Object(b.jsx)(F,{})})})})}),document.getElementById("root"))},5:function(e,t,a){e.exports={container:"header_container__Qg6Mi",title:"header_title__1DXxp",input:"header_input__2cfQn",sorting:"header_sorting__1op8t",form:"header_form__CKDVN",label:"header_label__5gY9r",options:"header_options__2uQYe",categories:"header_categories__Hrmmh",sortby:"header_sortby__2njdc",search:"header_search__130F1",button:"header_button__G3RR8"}},7:function(e,t,a){e.exports={page:"book-page_page__3w5u0",left:"book-page_left__2JpXO",image:"book-page_image__38L3Z",right:"book-page_right__2th9H",category:"book-page_category__iB54K",title:"book-page_title__1Hoja",author:"book-page_author__2cELh",container:"book-page_container__2guiP",description:"book-page_description__kSeF4",button:"book-page_button__8cSDH",buttonText:"book-page_buttonText__2G3oX"}},9:function(e,t,a){e.exports={container:"book-list-item_container__3YSdd",info:"book-list-item_info__1v0FZ",category:"book-list-item_category__3g5Ki",author:"book-list-item_author__36aul",title:"book-list-item_title__3jXk-",image:"book-list-item_image__1KfFU"}}},[[43,1,2]]]);
//# sourceMappingURL=main.ee426895.chunk.js.map